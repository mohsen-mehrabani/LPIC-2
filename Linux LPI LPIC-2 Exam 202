Linux LPI LPIC-2 Exam 202

01. Introduction

02. DNS Server Options
  nslookup host dig dig @server site (without www)
  
  DNS
    1. djbdns 
         Daniel J Bernstein
         Abandonded in 2001
         Forked now
         used in Debian dbndns
         separate components tinydns
       
    2. powerdns
        modular
        front end
        vary
        back end varies
    3. dnsmasq
        small
        simple
        forwarder
        dns tftp dhcp
        
     BIND the importat dns for linux
     
03. Caching Nameserver with BIND
  1. Forwarding dns
  2. Caching DNS
  apt install bind9
  /etc/bind/
  /etc/bind/named.conf.options ---> add recursion yes; (It's necessary for running rndc and without that the named service won't run)
  
  
04. Creating and Maintaining DNS Zones with BIND 
  1. edit /etc/bind/named.conf.local  --> add zone & reverse zone
  2. create zones in /etc/bind/
    you can copy a db. file and rename it for both zone and reverse zones
    (Do Not Forget remane the serial)
    rndc reload for rloading the configurations
    test whith dig @localhost .... and dig @localhost -x .. for reverse dns
    

05. DNS Master and Slave with BIND
  1. /etc/bind/named.conf.local --->
    add:
          allow-transfer { salve's IP; };
          
  2. in salve:
          check the firewall to transfer the dns traffic (port 53)
          centos 6 --> system-config-firewall-tui(test user interface)
          centos 8 --> firewall has GUI & firewalld
          install bind
          /etc/named.conf -->
            listen-on port { any;}
            allow-query { any;}
            add zone whith slave type and masters { master's IP;}; file "zone db.file"
            start service named
            
            
06. Securing BIND Server

  /etc/bind/  -->
   1. dnssec-keygen -a(algorithm) HMAC-MD5 -b(size) size -n(name) name -r(randomdev) /dev/urandom keyname
       notes:
            RSASHA1 will be used by default
            HMAC keys must be between 1 and 512 bits.
            -n nametype
              Specifies the owner type of the key. The value of nametype must either be ZONE (for a DNSSEC zone key (KEY/DNSKEY)),
              HOST or ENTITY (for a key associated with a host (KEY)), USER (for a key associated with a user(KEY)) or OTHER (DNSKEY).
              These values are case insensitive. Defaults to ZONE for DNSKEY generation.
   2. It'll create 2 keys, Kkeyname.key & Kkeyname.private. Copy Key in .private for the next.
   3. create named.cong.tsig -->
        key "keyname" {
                        algorithm HMAC-MD5;
                        secret "the sercret key";
                        };
   4. add in named.conf --> include "/etc/bind/named.conf.tsig";
   5. named.conf.local --> edit allow-transfer { key "keyname"; };
   6. reload rndc

   On other server:
   1. centos: /etc/named.conf --> add
        key "keyname" {
            algorthm HMAC-MD5;
            secret "key";
            };
   2. server IP/hostname {
            key { keyname; };
            };
   3. service named restart

07.  Split DNS with BIND
  1. Edit /etc/bind/named.conf.local 
      add new zone
  2. Create new db. for the new zone
  3. rndc  restart
    It was really easy, I know
            
08. Running BIND in a Chroot Jail - CBT Nuggets
	In centos it is very easy 
		yum install bind-chroot
		/etc/sysconfig
		cat named
		/var/named/chroot
			
	In ubuntu you should configure it in APP Armor
		/etc/default/bind9 add -t /var/named/chroot to options
		mkdir -p /var/named/chroot
		go to the /var/named/chroot directory
		mkdir etc
		mkdir dev


09. Apache Web Server Installation and Setup - CBT Nuggets		
				
    package name 		redhat/centos		ubuntu/debian
          httpd			apache2
    config location	/etc/httpd/		/etc/apache2

  Ubuntu/Debian

    /etc/apache2/	apache2.conf	1.sites-enabled
            2.mods-enabled						

            1.sites-available
            2.mods-available

    httpd.conf		conf.d

    apt install apache2
      /var/www/html/index.html

  Cenos/Redhat

    yum install httpd
    default configuration file:/etc/httpd/conf/httpd.conf
    additional configuration files: /etc/httpd/conf.d
    /var/www/html/index.html which does not exist index.html by default

			 						
		 						                    
    
       
        
  
  
  
